{"ast":null,"code":"import _slicedToArray from\"C:/IMPORTANTE/CURSOS/ALURA/HTTP_Entendendo_a_WEB_por_baixo_dos_panos/api-alurabooks/curso-react-alurabooks/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AbBotao,AbCampoTexto,AbModal}from\"ds-alurabooks\";import{useState}from\"react\";import http from\"../../http\";import imagemPrincipal from'./assets/login.png';import'./ModalLoginUsuario.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalLoginUsuario=function ModalLoginUsuario(_ref){var aberta=_ref.aberta,aoFechar=_ref.aoFechar,aoEfetuarLogin=_ref.aoEfetuarLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),senha=_useState4[0],setSenha=_useState4[1];var aoSubmeterFormular=function aoSubmeterFormular(evento){evento.preventDefault();var usuario={email:email,senha:senha};http.post('public/login',usuario).then(function(reposta){sessionStorage.setItem('token',reposta.data.access_token);setEmail('');setSenha('');aoEfetuarLogin();}).catch(function(erro){var _erro$response,_erro$response$data;if(erro!==null&&erro!==void 0&&(_erro$response=erro.response)!==null&&_erro$response!==void 0&&(_erro$response$data=_erro$response.data)!==null&&_erro$response$data!==void 0&&_erro$response$data.message){alert(erro.response.data.message);}else{alert('Aconteceu um erro inesperado ao afetuar o seu login! Entre em contato com o suporte!');}});};return/*#__PURE__*/_jsx(AbModal,{titulo:\"Login\",aberta:aberta,aoFechar:aoFechar,children:/*#__PURE__*/_jsxs(\"section\",{className:\"corpoModalCadastro\",children:[/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{src:imagemPrincipal,alt:\"Pessoa segurando uma chave na frente de uma tela de computador que est\\xE1 exibindo uma fechadura\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:aoSubmeterFormular,children:[/*#__PURE__*/_jsx(AbCampoTexto,{label:\"E-mail\",value:email,onChange:setEmail,type:\"email\"}),/*#__PURE__*/_jsx(AbCampoTexto,{label:\"Senha\",value:senha,onChange:setSenha,type:\"password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"acoes\",children:/*#__PURE__*/_jsx(AbBotao,{texto:\"Fazer login\"})})]})]})});};export default ModalLoginUsuario;","map":{"version":3,"names":["AbBotao","AbCampoTexto","AbModal","useState","http","imagemPrincipal","ModalLoginUsuario","aberta","aoFechar","aoEfetuarLogin","email","setEmail","senha","setSenha","aoSubmeterFormular","evento","preventDefault","usuario","post","then","reposta","sessionStorage","setItem","data","access_token","catch","erro","response","message","alert"],"sources":["C:/IMPORTANTE/CURSOS/ALURA/HTTP_Entendendo_a_WEB_por_baixo_dos_panos/api-alurabooks/curso-react-alurabooks/src/componentes/ModalLoginUsuario/index.tsx"],"sourcesContent":["import { AbBotao, AbCampoTexto, AbModal } from \"ds-alurabooks\"\r\nimport { useState } from \"react\"\r\nimport http from \"../../http\"\r\n\r\nimport imagemPrincipal from './assets/login.png'\r\n\r\nimport './ModalLoginUsuario.css'\r\n\r\ninterface PropsModalLoginUsuario {\r\n    aberta: boolean\r\n    aoFechar: () => void\r\n    aoEfetuarLogin: () => void\r\n}\r\n\r\nconst ModalLoginUsuario = ({ aberta, aoFechar, aoEfetuarLogin } : PropsModalLoginUsuario) => {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [senha, setSenha] = useState('')\r\n\r\n    const aoSubmeterFormular = (evento: React.FormEvent<HTMLFormElement>) => {\r\n        evento.preventDefault()\r\n        const usuario = {\r\n            email,\r\n            senha,\r\n        }\r\n        http.post('public/login', usuario)\r\n            .then(reposta => {\r\n                sessionStorage.setItem('token', reposta.data.access_token)\r\n                setEmail('')\r\n                setSenha('')\r\n                aoEfetuarLogin()\r\n            })\r\n            .catch(erro => {\r\n                if (erro?.response?.data?.message) {\r\n                    alert(erro.response.data.message)\r\n                } else {\r\n                    alert('Aconteceu um erro inesperado ao afetuar o seu login! Entre em contato com o suporte!')\r\n                }\r\n                \r\n            })\r\n    }\r\n\r\n    return (<AbModal \r\n        titulo=\"Login\" \r\n        aberta={aberta}\r\n        aoFechar={aoFechar}    \r\n    >\r\n        <section className=\"corpoModalCadastro\">\r\n            <figure>\r\n                <img src={imagemPrincipal} alt=\"Pessoa segurando uma chave na frente de uma tela de computador que estÃ¡ exibindo uma fechadura\" />\r\n            </figure>\r\n            <form onSubmit={aoSubmeterFormular}>\r\n                <AbCampoTexto \r\n                    label=\"E-mail\"\r\n                    value={email}\r\n                    onChange={setEmail}\r\n                    type=\"email\"\r\n                />\r\n                <AbCampoTexto \r\n                    label=\"Senha\"\r\n                    value={senha}\r\n                    onChange={setSenha}\r\n                    type=\"password\"\r\n                />\r\n                <div className=\"acoes\">\r\n                    <AbBotao texto=\"Fazer login\"/>\r\n                </div>\r\n            </form>\r\n        </section>\r\n    </AbModal>)\r\n}\r\n\r\nexport default ModalLoginUsuario"],"mappings":"gMAAA,OAASA,OAAT,CAAkBC,YAAlB,CAAgCC,OAAhC,KAA+C,eAA/C,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,KAAP,KAAiB,YAAjB,CAEA,MAAOC,gBAAP,KAA4B,oBAA5B,CAEA,MAAO,yBAAP,C,wFAQA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,MAAmE,IAAhEC,OAAgE,MAAhEA,MAAgE,CAAxDC,QAAwD,MAAxDA,QAAwD,CAA9CC,cAA8C,MAA9CA,cAA8C,CAEzF,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA0BR,QAAQ,CAAC,EAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,MAAD,CAA8C,CACrEA,MAAM,CAACC,cAAP,GACA,GAAMC,QAAO,CAAG,CACZP,KAAK,CAALA,KADY,CAEZE,KAAK,CAALA,KAFY,CAAhB,CAIAR,IAAI,CAACc,IAAL,CAAU,cAAV,CAA0BD,OAA1B,EACKE,IADL,CACU,SAAAC,OAAO,CAAI,CACbC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgCF,OAAO,CAACG,IAAR,CAAaC,YAA7C,EACAb,QAAQ,CAAC,EAAD,CAAR,CACAE,QAAQ,CAAC,EAAD,CAAR,CACAJ,cAAc,GACjB,CANL,EAOKgB,KAPL,CAOW,SAAAC,IAAI,CAAI,wCACX,GAAIA,IAAJ,SAAIA,IAAJ,2BAAIA,IAAI,CAAEC,QAAV,wDAAI,eAAgBJ,IAApB,wCAAI,oBAAsBK,OAA1B,CAAmC,CAC/BC,KAAK,CAACH,IAAI,CAACC,QAAL,CAAcJ,IAAd,CAAmBK,OAApB,CAAL,CACH,CAFD,IAEO,CACHC,KAAK,CAAC,sFAAD,CAAL,CACH,CAEJ,CAdL,EAeH,CArBD,CAuBA,mBAAQ,KAAC,OAAD,EACJ,MAAM,CAAC,OADH,CAEJ,MAAM,CAAEtB,MAFJ,CAGJ,QAAQ,CAAEC,QAHN,uBAKJ,iBAAS,SAAS,CAAC,oBAAnB,wBACI,qCACI,YAAK,GAAG,CAAEH,eAAV,CAA2B,GAAG,CAAC,mGAA/B,EADJ,EADJ,cAII,cAAM,QAAQ,CAAES,kBAAhB,wBACI,KAAC,YAAD,EACI,KAAK,CAAC,QADV,CAEI,KAAK,CAAEJ,KAFX,CAGI,QAAQ,CAAEC,QAHd,CAII,IAAI,CAAC,OAJT,EADJ,cAOI,KAAC,YAAD,EACI,KAAK,CAAC,OADV,CAEI,KAAK,CAAEC,KAFX,CAGI,QAAQ,CAAEC,QAHd,CAII,IAAI,CAAC,UAJT,EAPJ,cAaI,YAAK,SAAS,CAAC,OAAf,uBACI,KAAC,OAAD,EAAS,KAAK,CAAC,aAAf,EADJ,EAbJ,GAJJ,GALI,EAAR,CA4BH,CAxDD,CA0DA,cAAeP,kBAAf"},"metadata":{},"sourceType":"module"}